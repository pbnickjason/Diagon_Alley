<h1 style="text-align: center"> About Page </h1>

<link rel="stylesheet" href="/droplet.css"/>

<div class="container">
<div class="row">
    <div class="col-xs-6">
      <select class="form-control" id="language-select">
        <option value="javascript">JavaScript</option>
        <option value="c_cpp">ANSI C</option>
        <option value="html">HTML</option>
        <option value="coffeescript">CoffeeScript</option>
      </select>
    </div>
    <div class="col-xs-6">
      <button class="btn btn-primary" id="toggle">Toggle Blocks</button>
    </div>
  </div><br/>
  <div id="editor-wrapper" style="position:relative;width:100%;height:500px;border: 1px solid black;">
    <div id="editor"></div>
  </div>
</div>
<a id="save-button">
  <div class="button">
    <div class="button-text">Save Script</div>
  </div>
</a>
<a id="execute-button">
  <div class="button">
    <div class="button-text">Execute</div>
  </div>
</a>

<script src="/ace.js"></script>
<script src="/droplet-full.js"></script>
<script src="/droplet_block_definitions.js"></script>
<script>
var sessions = {};
var editor = new droplet.Editor(document.getElementById('editor'), modes['javascript']);
document.getElementById('toggle').addEventListener('click', function() {
  editor.toggleBlocks();
});
document.getElementById('language-select').addEventListener('change', function() {
  if (this.value in sessions) {
    console.log("hit");
    editor.aceEditor.setSession(sessions[this.value]);
  }
  else {
    var newSession = sessions[this.value] = ace.createEditSession('', 'ace/mode/' + this.value);
    editor.aceEditor.setSession(newSession);
    editor.bindNewSession(modes[this.value]);
  }
});
  init_text = "var ros = ros_init();\nvar velTopic = new_topic(ros, 'cmd_vel', 'geometry_msgs/Twist');\nfunction step1() {\n  var twist_msg = geometry_msgs_Twist(ros, 0.3, 0, 0, 0, 0, 0);\n  velTopic.publish(twist_msg);\n}\nfunction step2() {\n  var twist_msg = geometry_msgs_Twist(ros, 0, 0, 0, 0, 0, -0.4);\n  velTopic.publish(twist_msg);\n}\nfunction step3() {\n  var twist_msg = geometry_msgs_Twist(ros, 0, 0, 0, 0, 0, 0);\n  velTopic.publish(twist_msg);\n}\nsetTimeout(step1, 1000);\nsetTimeout(step2, 2000);\nsetTimeout(step3, 3000);";
editor.setValue(init_text);
</script>

